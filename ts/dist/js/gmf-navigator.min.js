var __decorate=this&&this.__decorate||function(t,e,n,i){var o=arguments.length,r=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)if(s=t[a])r=(o<3?s(r):o>3?s(e,n,r):s(e,n))||r;return o>3&&r&&Object.defineProperty(e,n,r),r};var __metadata=this&&this.__metadata||function(t,e){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};$.fn.extend({exists:function(){return this.length>0},notExists:function(){return this.length===0}});String.prototype.withDottedPrefix=function(){return"."+this};String.prototype.removeWords=function(t){if(!t||t.length==0){throw"Invalid word array!"}var e=this;for(var n=0,i=t;n<i.length;n++){var o=i[n];var r=new RegExp(o,"g");e=e.replace(r,"")}return e};var GmfMenu;(function(t){var e=function(){function t(){this.hamburger="gmf-hamburger";this.link="gmf-link";this.menu="gmf-menu";this.linkWrapper=".gmf-action-component";this.linkNavWrapper=".gmf-link-component";this.childrenWrapper="gmf-horizontal-children";this.dottedHamburger=this.hamburger.withDottedPrefix();this.dottedLink=this.link.withDottedPrefix();this.dottedMenu=this.menu.withDottedPrefix()}t.prototype.linkWrapperSelector=function(){return this.linkWrapper+", "+this.linkNavWrapper};t.prototype.getLinkWrapper=function(t,e){var n=$(t.target);if(n.closest(this.dottedHamburger).notExists()){return n.closest(this.linkWrapperSelector())}t.stopImmediatePropagation();e();return $()};t.prototype.tryOpenLink=function(t){var e=t.children(this.dottedLink).attr("href");if(e!=="#"){window.open(e,"_self")}};t=__decorate([Gmf.IoC.Injectable()],t);return t}();t.Components=e})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t){var e=this;this.components=t;this.collapsed="collapsed";this.dottedCollapsed=this.collapsed.withDottedPrefix();this.hasChildren="has-children";this.dottedChildren=this.hasChildren.withDottedPrefix();this.responsive="responsive";this.visible="is-menu-expanded";this.toggleMenu=function(){$(e.components.dottedMenu).toggleClass(e.visible)};this.onBodyMouseDown=function(){var t=e.collapsedWithChildren();if(t.exists()){t.removeClass(e.collapsed)}}}t.prototype.isResponsive=function(){var t=$(this.components.dottedMenu);return t.hasClass(this.responsive)};t.prototype.setDefaultBehaviour=function(){$("body").on("mousedown",this.onBodyMouseDown)};t.prototype.clearCollapsed=function(){var t=this.collapsedWithChildren();t.removeClass(this.collapsed);return t};t.prototype.collapsedWithChildren=function(){return $(this.dottedChildren+this.dottedCollapsed)};t.prototype.hasLink=function(t,e){if(!t.is(this.dottedChildren)){return true}e.stopImmediatePropagation();var n=this.clearCollapsed();var i=t[0]!==n[0];var o=i&&!t.is(this.dottedCollapsed);if(o){t.addClass(this.collapsed)}return false};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.Components])],t);return t}();e.Behaviour=t})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(t){var e=function(){function t(){this.placeholder=".gmf-body-container";this.placeholderPseudo="::before";this.placeholderValue="content";this.mobileDescription="mobile";this.tabletDescription="tablet";this.desktopDescription="desktop"}t.prototype.isMobile=function(){return this.descriptionEquals(this.mobileDescription)};t.prototype.descriptionEquals=function(t){return this.getDescription()===t};t.prototype.getDescription=function(){var t=$(this.placeholder)[0];return this.getDisplaySize(t).removeWords(["'",'"'])};t.prototype.getDisplaySize=function(t){var e=window.getComputedStyle(t,this.placeholderPseudo);return e.getPropertyValue(this.placeholderValue)};t=__decorate([Gmf.IoC.Injectable()],t);return t}();t.Device=e})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t){this.components=t;this.childrenWrapper=".gmf-horizontal-list";this.listSelector="#horizontalMenuWrapper"}t.prototype.detach=function(){return $(this.childrenWrapper).children().detach()};t.prototype.attach=function(t){var e=$(this.components.dottedMenu);var n=e.find(this.childrenWrapper);t.appendTo(n)};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.Components])],t);return t}();e.HorizontalMenu=t})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t,e){this.components=t;this.behaviour=e;this.menuElement="<nav>";this.menuChildElement="<ul>";this.name="gmf-vertical-menu";this.iconMenu="gmf-icon-menu";this.dottedName=this.name.withDottedPrefix();this.children="gmf-vertical-list"}t.prototype.getMenu=function(){return $(this.dottedName)};t.prototype.getHamburger=function(){var t=this.dottedName+", "+this.components.dottedHamburger;return $(t)};t.prototype.create=function(){var t=this.getClasses();var e=$(this.components.dottedMenu);var n=$(this.menuElement).addClass(t);$(this.menuChildElement).addClass(this.children).appendTo(n);n.appendTo(e)};t.prototype.getClasses=function(){var t=this.behaviour.visible;var e=$(this.components.dottedHamburger+t.withDottedPrefix());var n=this.name;if(e.exists()){n+=" "+t}return n};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.Components,e.Behaviour])],t);return t}();e.VerticalMenuComponents=t})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t,e,n){var i=this;this.components=t;this.menuComponents=e;this.behaviour=n;this.onMouseDown=function(t){if(i.clickedScrollbar(t)){t.stopImmediatePropagation();return}var e=i.components.linkWrapperSelector();var n=$(t.target).closest(e);if(n.notExists()){t.stopPropagation();i.behaviour.toggleMenu()}}}t.prototype.build=function(t){var e=this.menuComponents.getMenu();if(e.notExists()&&this.behaviour.isResponsive()){this.buildFromScratch();return}if(t){this.onBuilt()}};t.prototype.getChildrenSelector=function(){return this.menuComponents.children.withDottedPrefix()};t.prototype.onBuilt=function(){var t=this.menuComponents.getHamburger();t.on("mousedown",this.onMouseDown)};t.prototype.buildFromScratch=function(){this.menuComponents.create();this.onBuilt()};t.prototype.clickedScrollbar=function(t){var e=$(t.target)[0];return e.offsetWidth-e.clientWidth>=t.clientX};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.Components,e.VerticalMenuComponents,e.Behaviour])],t);return t}();e.VerticalMenuBuilder=t})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t,e,n){this.builder=t;this.menuComponents=e;this.components=n;this.childrenWrapper="gmf-vertical-children";this.descriptionAttribute="aria-describedby"}t.prototype.create=function(t){this.builder.build(t)};t.prototype.attach=function(t,e){var n=$(this.builder.getChildrenSelector());t.appendTo(n);this.convertToVertical(t,e)};t.prototype.detach=function(t){var e=t.find(this.childrenWrapper.withDottedPrefix());e.removeClass(this.childrenWrapper).addClass(this.components.childrenWrapper);e.removeAttr(this.descriptionAttribute);return t.exists()?t.detach():$()};t.prototype.tryDestroy=function(){var t=this.menuComponents.getMenu();var e=this.components.dottedLink;if(!$(e,t).exists()){t.remove()}};t.prototype.convertToVertical=function(t,e){var n=this.components.childrenWrapper;t.attr(this.descriptionAttribute,e);t.find(n.withDottedPrefix()).addClass(this.childrenWrapper).removeClass(n)};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.VerticalMenuBuilder,e.VerticalMenuComponents,e.Components])],t);return t}();e.VerticalMenu=t})(GmfMenu||(GmfMenu={}));var GmfMenu;(function(e){var t=function(){function t(t,e,n,i,o){var r=this;this.horizontalMenu=t;this.verticalMenu=e;this.device=n;this.behaviour=i;this.components=o;this.resizing=false;this.transformNavigation=function(){if(r.device.isMobile()){var t=r.horizontalMenu.detach();r.verticalMenu.create(false);r.verticalMenu.attach(t,r.horizontalMenu.listSelector)}else{var t=$("["+r.verticalMenu.descriptionAttribute+"='"+r.horizontalMenu.listSelector+"']");var e=r.verticalMenu.detach(t);r.horizontalMenu.attach(e);r.verticalMenu.tryDestroy()}r.resizing=false};this.onResize=function(){if(!r.behaviour.isResponsive()||r.resizing){return}r.resizing=true;r.initiateNavigationTransformation()};this.initiateNavigationTransformation=function(){if(window.requestAnimationFrame){window.requestAnimationFrame(r.transformNavigation);return}var t=300;setTimeout(r.transformNavigation,t)};this.onMouseDown=function(t){var e=r.components.getLinkWrapper(t,r.behaviour.toggleMenu);if(e.exists()&&r.behaviour.hasLink(e,t)){r.components.tryOpenLink(e)}}}t.prototype.initialize=function(){$(this.components.dottedMenu).on("mousedown",this.onMouseDown);this.behaviour.setDefaultBehaviour();this.verticalMenu.create(true);$(window).on("resize",this.onResize);if(this.behaviour.isResponsive()){this.triggerResize()}};t.prototype.triggerResize=function(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",true,false);document.dispatchEvent(t)};t=__decorate([Gmf.IoC.Injectable(),__metadata("design:paramtypes",[e.HorizontalMenu,e.VerticalMenu,e.Device,e.Behaviour,e.Components])],t);return t}();e.Menu=t})(GmfMenu||(GmfMenu={}));$(function(){var t=Gmf.IoC.Injector.resolve(GmfMenu.Menu);t.initialize()});